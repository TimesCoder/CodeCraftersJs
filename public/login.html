<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <link rel="stylesheet" href="Login_and_regist.css" />
  </head>
  <body>
    <div class="container">
      <div class="login">
        <form action="" class="form" onsubmit="return validateForm()">
          <h1 class="h1">Log In</h1>
          <hr class="hr" />
          <p class="p" id="message"></p>
          <label for="loginEmail">Email</label>
          <input
            type="email"
            id="loginEmail"
            class="input"
            placeholder="Enter your Email"
          />
          <label for="loginPassword">Password</label>
          <input
            type="password"
            id="loginPassword"
            class="input"
            placeholder="Password"
          />
          <!-- <button class="button" onclick="window.location.href='index.html'">Log In</button> -->
          <button class="button" type="submit" formaction="home">Log In</button>
          <p>Don't have an account? <a href="register">Sign Up</a></p>
        </form>
      </div>
      <div class="right">
        <img src="./assets/sma.jpg" alt="" />
      </div>
    </div>

    <script>
      // Mengvalidasi form login
      function validateForm() {
        const loginEmail = document.getElementById('loginEmail').value;
        const loginPassword = document.getElementById('loginPassword').value;

        // mengecek apakah email dan password yang sudah di daftarkan di from register
        const params = new URLSearchParams(window.location.search);
        const emailParam = params.get('email');
        const passwordParam = params.get('password');

        // Cek apakah ada data pendaftaran yang disimpan di localStorage
        if (emailParam && passwordParam) {
          if (loginEmail !== emailParam || loginPassword !== passwordParam) {
            document.getElementById('message').innerHTML =
              'Email atau Password salah.';
            return false;
          }
        } else {
          const registEmail = localStorage.getItem('registEmail');
          const registPassword = localStorage.getItem('registPassword');
          if (registEmail && registPassword) {
            if (
              loginEmail !== registEmail ||
              loginPassword !== registPassword
            ) {
              document.getElementById('message').innerHTML =
                'Email atau Password salah.';
              return false;
            }
          } else {
            document.getElementById('message').innerHTML =
              'Email atau Password salah.';
            return false;
          }
        }

        return true;
      }
    </script>
  </body>
</html>
